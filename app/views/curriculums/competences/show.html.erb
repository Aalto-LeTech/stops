<!-- curriculums/competences/show -->
<% content_for :javascripts do %>
  <%= javascript_include_tag 'views/curriculums/courseGraph' %>
<% end %>

<% if can? :update, @curriculum %>
  <ul class="nav nav-pills pull-right">
    <li><%= link_to t('Admin_view'), edit_prereqs_curriculum_competence_path(:curriculum_id => @curriculum, :id => @competence) %></li>
    <li class="active"><%= link_to t('Student_view'), curriculum_competence_path(curriculum_id: @curriculum, id: @competence) %></li>
  </ul>
<% end %>

<div>
  <h1><%= @competence.localized_name %></h1>
</div>

<h2><%=t :competence_skills_heading %></h2>

<ul>
  <% @competence.skills.each do |skill| %>
    <li><%= skill.localized_name %></li>
  <% end %>
</ul>
<!--td>< link_to t(:contributing_courses_link), curriculum_competence_skill_path(:curriculum_id => @curriculum.id, :competence_id => @competence.id, :id => skill.id) ></td-->


<h2><%=t :competence_courses_heading %></h2>
<ul>
  <% @competence.courses.each do |course| %>
    <li><%= course.course_code %> <%= course.localized_name %></li>
  <% end %>
</ul>

<div id="course-graph"
    data-graph-path="<%= graph_curriculum_path(:id => @curriculum.id) %>"
    data-source-id="<%= @competence.id %>"
    >
    <!-- ko template: { name: 'courseTemplate', foreach: visibleCourses, afterRender: updateElementDimensions } --><!-- /ko -->
</div>

<%= render :partial => 'courses/graph_templates' %>

<% # TODO: plain list of courses %>

<p><%= link_to t(:Back), @curriculum %></p>
