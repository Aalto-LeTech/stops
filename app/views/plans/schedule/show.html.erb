<% content_for :javascript do %>
  <script type="text/javascript">
    <%= render "show_i18n_strings.js" %>
  </script>
  <%= javascript_include_tag 'schedule/schedule' %>
  <script type="text/javascript">
    <%= render "metadata.js" %>
  </script>
<% end %>

<% # "Course locked" icon that will be cloned using JS. Do not include id on the element, because that will also be copied!
%>
<div id="cloneable-imgs" class="hide">
  <%= image_tag "glyphicons_203_lock.png", :class => "course-locked" %>
</div>


<div class="row-fluid">
  <div class="span2" style="background:#AFA;">
    <div class="row-fluid">
      <div class="span6" style="background:#FCC;">
      </div>
      <div class="span6" style="background:#CCF;">
      </div>
    </div>
  </div>
  <div class="span10" style="background:#AAF;">
  </div>
</div>

<div class="row-fluid">

  <div class="span2" id="sidebar">

    <div id="controls">

      <h2><%= t('.controls') %></h2>

      <h3><%= t('.actions') %></h3>

      <button id="save-button" data-bind="click: save"><%= t('.save_button') %></button>

      <h3><%= t('.preferences') %></h3>

      <div class="row-fluid">
        <div class="span9">
          <label for="automatic-arrangement-input">
            <%= t('.automatic_arrangement_checkbox') %>
          </label>
        </div>
        <div class="span3">
          <input id="automatic-arrangement-input" type="checkbox" />
          <%= image_tag("glyphicons_195_circle_info.png", :size => "16x16" ) %>
        </div>
      </div>

      <div class="row-fluid">
        <div class="span9">
          <label for="draw-req-graphs-input">
            <%= t('.draw_course_graphs_checkbox') %>
          </label>
        </div>
        <div class="span3">
          <input id="draw-req-graphs-input" type="checkbox" />
          <%= image_tag("glyphicons_195_circle_info.png", :size => "16x16" ) %>
        </div>
      </div>

    </div>

    <!--
    -->

    <!-- Selected course details -->
    <!-- ko if: selectedObjectType() == 'Course' -->
      <div class="well" data-bind="with: selectedObject">

        <h3>
          <%= t('.selected_course') %>
        </h3>

        <p>
          <span data-bind="text: code"></span>
          <span data-bind="text: name"></span>
        </p>

        <div class="row-fluid">
          <div class="span6" data-toggle="tooltip" title="<%= t('.extent_tooltip') %>">
            <label for="credits-input">
              <%= t('.extent') %>:
            </label>
          </div>
          <div class="span6">
            <input id="credits-input" class="input-mini" type="number" data-bind="value: credits, valueUpdate: 'keyup'" />
          </div>
        </div>

        <div class="row-fluid">
          <div class="span6" data-toggle="tooltip" title="<%= t('.grade_tooltip') %>">
            <label for="grade-input">
              <%= t('.grade') %>:
            </label>
          </div>
          <div class="span6">
            <input id="grade-input" class="input-mini" type="number" data-bind="value: grade, valueUpdate: 'keyup'" />
          </div>
        </div>

        <div class="row-fluid">
          <div class="span9">
            <label for="course-lock-input">
              <%= t('.course_lock_checkbox') %>
            </label>
          </div>
          <div class="span3">
            <input id="course-lock-input" type="checkbox" disabled="true" />
            <%= image_tag("glyphicons_195_circle_info.png", :size => "16x16" ) %>
          </div>
        </div>

        <h4><%= t('.prereqs') %></h4>

        <span data-bind="ifnot: hasPrereqs()"><%= t('.no_prereqs') %></span>

        <!-- ko if: hasPrereqs() -->
          <ul data-bind="foreach: getPrereqs()">
            <li>
              <span data-bind="text: code"></span>
              <span data-bind="text: name"></span>
            </li>
          </ul>
        <!-- /ko -->

      </div>  <!-- well -->
    <!-- /ko -->

  </div>  <!-- span3, sidebar -->


  <div class="span10">

    <h1><%=t('.heading')%></h1>

    <% if @study_plan.courses.empty? && @study_plan.competences.empty? %>
      <div class="alert">
        <%= link_to t('.empty_instructions'), studyplan_competences_path %>
      </div>
    <% end %>

    <p id="status"></p>

    <p>
      <span data-bind="text: $root.i18n.foo "></span>
      <span data-bind="text: $root.i18n.bar "></span>
    </p>

    <div class="plan" id="plan" data-studyplan-path="<%= plan_path(@study_plan.id) %>">

      <div id="svg"></div>

      <!-- ko foreach: periods -->
        <div class="period" data-bind="droppable: droppedCourse, position: position, css: {'selected': hilightSelected, 'receiver': hilight, 'old': isOld, 'now': isNow}">
          <div class="name" data-bind="text: name"></div>
          <div class="credits"><span data-toggle="tooltip" title="<%= t('.period_credits_tooltip') %>" data-bind="text: credits, css: creditsStatus"></span> <%= t('.cr') %></div>
        </div>
      <!-- /ko -->

      <!-- ko foreach: courses -->
        <div class="course" data-bind="draggable: {}, position: position, css: {'selected': hilightSelected, 'passed': grade, 'instanced': courseInstance, 'prereq-of': hilightPrereq, 'prereq-to': hilightPrereqTo, 'misordered': misordered}">
          <span data-bind="text: code"></span>
          <span data-bind="text: name"></span>
        </div>
      <!-- /ko -->

    </div>

  </div>  <!-- span9 -->

</div>  <!-- row-fluid -->
