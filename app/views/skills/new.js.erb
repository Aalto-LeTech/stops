$("#new-skill-box-content").html("<%= escape_javascript(render(:partial => "form"))%>");
$("#new-skill-box > .new-skill-box-footer > .save-button").click(function() {
  /* Check that all locales have required descriptions */
  var descs = $("input.new-skill-field", "#new-skill-box"),
      dataIsValid = true;
  descs.each(function() {
    if ($(this).val().length === 0) {
      dataIsValid = false;
    }
  });  

  if (dataIsValid) {
    $("#new-skill-box-content > form").submit();
    $("#new-skill-box").addClass("hide");
    $("#new-skill-box-content").html("");
  } else {
    /* TODO Better error handling */
    alert("Invalid form!");
  }
});

$("#new-skill-box > .new-skill-box-footer > .cancel-button").click(function() {
  $("#new-skill-box").addClass("hide");
});

$("#new-skill-box > .new-skill-close").click(function() {
  $("#new-skill-box").addClass("hide");
});

$("#new-skill-box").removeClass("hide");
